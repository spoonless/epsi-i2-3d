

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Tutoriel three.js" name="description" />
<meta content="three.js, webgl, 3D" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction et mise en place &mdash; Documentation Visualisation 3D </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Objets et scène" href="objets_et_scene.html" />
    <link rel="prev" title="Sommaire" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Visualisation 3D
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">three.js</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction et mise en place</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#chargement-asynchrone-en-local">Chargement asynchrone en local</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fichier-html-de-base">Fichier HTML de base</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-un-renderer">Création d’un renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-une-camera">Création d’une caméra</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-une-scene">Création d’une scène</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rendu-d-une-scene">Rendu d’une scène</a></li>
<li class="toctree-l2"><a class="reference internal" href="#redimensionnement-du-canevas">Redimensionnement du canevas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objets_et_scene.html">Objets et scène</a><ul>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#repere-de-coordonnees">Repère de coordonnées</a></li>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#mesh-et-geometry">Mesh et Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="objets_et_scene.html#les-transformations-dans-l-espace">Les transformations dans l’espace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#exercice">Exercice</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#une-animation-simple">Une animation simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#hierarchie-d-objets">Hiérarchie d’objets</a></li>
<li class="toctree-l3"><a class="reference internal" href="objets_et_scene.html#excercice">Excercice</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="materiaux.html">Les matériaux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#le-meshbasicmaterial">Le MeshBasicMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-lumieres">Les lumières</a></li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-materiaux-reagissant-a-la-lumiere">Les matériaux réagissant à la lumière</a><ul>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#excercice">Excercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#textures-et-maps">Textures et Maps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#chargement-d-une-texture">Chargement d’une texture</a></li>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#un-texture-comme-color-map">Un texture comme <em>color map</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="materiaux.html#les-autres-types-de-textures">Les autres types de textures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="materiaux.html#les-ombres">Les ombres</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactions.html">Les interactions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#les-controleurs">Les contrôleurs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interactions.html#le-controleur-orbital">Le contrôleur orbital</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#le-lancer-de-rayon">Le lancer de rayon</a></li>
<li class="toctree-l2"><a class="reference internal" href="interactions.html#la-projection">La projection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chargement_scene.html">Chargement de modèle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="chargement_scene.html#le-chargeur-gltf">Le chargeur glTF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="animation_curve.html">Animation à partir de courbes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="animation_curve.html#les-courbes">Les courbes</a></li>
<li class="toctree-l2"><a class="reference internal" href="animation_curve.html#representation-graphique-d-une-courbe">Représentation graphique d’une courbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="animation_curve.html#animation-le-long-d-une-courbe">Animation le long d’une courbe</a></li>
<li class="toctree-l2"><a class="reference internal" href="animation_curve.html#exercice">Exercice</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Visualisation 3D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Accueil</a> &raquo;</li>
        
      <li>Introduction et mise en place</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="objets_et_scene.html" class="btn btn-neutral float-right" title="Objets et scène" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Sommaire" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-et-mise-en-place">
<h1>Introduction et mise en place<a class="headerlink" href="#introduction-et-mise-en-place" title="Lien permanent vers ce titre">¶</a></h1>
<p><a class="reference external" href="https://threejs.org/">three.js</a> est une bibliothèque Javascript qui permet de réaliser des rendus 3D
dans un navigateur Web. <a class="reference external" href="https://threejs.org/">three.js</a> utilise <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a> pour le support 3D. <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a> est
une API de programmation dérivée de OpenGL ES qui est accessible depuis un navigateur
Web. Il faut donc utiliser un navigateur Web et une machine qui supportent <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous pouvez tester le support de <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a> de votre navigateur Web en vous rendant
à <a class="reference external" href="https://get.webgl.org/">cette adresse</a>.</p>
</div>
<p><a class="reference external" href="https://threejs.org/">three.js</a> fournit principalement :</p>
<ul class="simple">
<li><p>un moteur de scène permettant de créer des rendus et des animations complexes</p></li>
<li><p>un moteur de rendu temps réel</p></li>
</ul>
<div class="section" id="chargement-asynchrone-en-local">
<h2>Chargement asynchrone en local<a class="headerlink" href="#chargement-asynchrone-en-local" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une scène 3D nécessite souvent des <em>assets</em> externes (comme des modèles, des matériaux ou des textures).
Pour charger ces <em>assets</em>, <a class="reference external" href="https://threejs.org/">three.js</a> utilise un chargement asynchrone (ajax).
Pour des raisons de sécurité, certains
navigateurs (comme Chrome) n’autorisent pas le chargement asynchrone pour des fichiers
ouverts directement depuis son disque dur. Pour contourner cette limitation, il suffit
d’installer un serveur Web pour servir les fichiers depuis sa machine.</p>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si vous avez installé python 3 sur votre machine, vous pouvez très facilement
disposer d’un serveur Web. Il suffit de lancer la commande suivante depuis le répertoire de travail :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python3 -m http.server
</pre></div>
</div>
<p>Vous avez un serveur écoutant sur le port <strong>8000</strong> depuis le répertoire de travail.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si vous utilisez Chrome et que vous ne voulez pas utiliser un serveur Web,
il est possible d’autoriser le chargement asynchrone en désactivant
la stratégie de sécurité depuis la ligne de commande :</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Sous Windows</span><a class="headerlink" href="#id1" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>chrome.exe --disable-web-security --user-data-dir<span class="o">=</span>c:<span class="se">\t</span>mp<span class="se">\c</span>hrome
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Sous MacOS</span><a class="headerlink" href="#id2" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open -a Google<span class="se">\ </span>Chrome --args --disable-web-security --user-data-dir<span class="o">=</span>/tmp/chrome
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Sous Linux</span><a class="headerlink" href="#id3" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>google-chrome --disable-web-security --user-data-dir<span class="o">=</span>/tmp/chrome
</pre></div>
</div>
</div>
<p>Le paramètre <code class="docutils literal notranslate"><span class="pre">--user-data-dir</span></code> indique le répertoire contenant les données de configuration
de Chrome (le répertoire sera créé s’il n’existe pas).</p>
</div>
</div>
<div class="section" id="fichier-html-de-base">
<h2>Fichier HTML de base<a class="headerlink" href="#fichier-html-de-base" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour utiliser <a class="reference external" href="https://threejs.org/">three.js</a> dans votre projet, vous pouvez le télécharger à
depuis <a class="reference external" href="https://threejs.org/build/three.js">https://threejs.org/build/three.js</a> et le stocker dans votre projet.
Vous pouvez également le référencer directement dans votre page HTML à partir de cette
adresse.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il existe une version minifiée disponible à cette adresse : <a class="reference external" href="https://threejs.org/build/three.min.js">https://threejs.org/build/three.min.js</a></p>
</div>
<p>Une page de base pour démarrer un projet <a class="reference external" href="https://threejs.org/">three.js</a> ressemble donc à :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;three.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// le code ici</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="creation-d-un-renderer">
<h2>Création d’un renderer<a class="headerlink" href="#creation-d-un-renderer" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le premier objet à créer avec <a class="reference external" href="https://threejs.org/">three.js</a> est un <strong>moteur de rendu</strong>. Cet objet sera
responsable de rendre une image à partir des informations de la scène et d’une caméra.
Le <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer">WebGLRenderer</a> permet de créer des rendus 3D en utilisant l’API <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a>. <a class="reference external" href="https://www.khronos.org/webgl/">WebGL</a>
permet de créer des images dans un élément <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> de la page . Le <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer">WebGLRenderer</a>
crée donc un élément <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> que l’on doit récupérer grâce avec sa propriété <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer.domElement">domElement</a>
pour pouvoir l’ajouter dans le document. Il faut ensuite préciser la taille de la fenêtre
de rendu avec la méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer.setSize">setSize</a> (dans cet exemple on considère que le rendu se fera dans toute la fenêtre) :</p>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;three.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">();</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<p>L’appel à <code class="docutils literal notranslate"><span class="pre">setSize()</span></code> à la ligne 18 a pour conséquence de modifier la taille
de l’élément <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> créé par le moteur de rendu.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous le souhaitez, il est possible de fournir à la construction d’un
<a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer">WebGLRenderer</a> l’élément <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> à utiliser plutôt que de le laisser
en créer un :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span><span class="nx">canvas</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;monCanvas&quot;</span><span class="p">)});</span>
</pre></div>
</div>
<p>Reportez-vous à la documentation du <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer">WebGLRenderer</a> pour connaître toutes
les options de création.</p>
</div>
</div>
<div class="section" id="creation-d-une-camera">
<h2>Création d’une caméra<a class="headerlink" href="#creation-d-une-camera" title="Lien permanent vers ce titre">¶</a></h2>
<p>La caméra est la représentation virtuelle de la position de l’observateur. Dans
<a class="reference external" href="https://threejs.org/">three.js</a>, la caméra est nécessaire au moteur de rendu pour créer l’image finale.</p>
<p id="threejs-camera-nearplan">Dans <a class="reference external" href="https://threejs.org/">three.js</a>, il existe plusieurs types de caméras qui héritent de la classe
de base <a class="reference external" href="https://threejs.org/docs/index.html#api/en/cameras/Camera">Camera</a>. La caméra la plus couramment utilisée pour la vue 3D est la <a class="reference external" href="https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>
Cette caméra définit une projection géométrique dite en perspective, qui imite
le comportement de l’œil humain. La projection correspond à une pyramide partant
du point de la caméra. Cette pyramide est tronquée par deux plans :</p>
<dl class="simple">
<dt>near plan</dt><dd><p>Ce plan correspond à la distance la plus proche de la caméra à partir de laquelle un objet
de la scène sera visible</p>
</dd>
<dt>far plan</dt><dd><p>Ce plan correspond à la distance la plus éloignée de la caméra au delà de laquelle
un objet de la scène ne sera plus visible</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On parle souvent de <strong>clipping</strong> pour indiquer qu’un objet de la scène n’est
pas pris en compte par la caméra pour le rendu lorsqu’il se situe devant
le <strong>near plan</strong> ou derrière le <strong>far plan</strong>.</p>
</div>
<p>Cette pyramide tronquée de vision définit le <a class="reference external" href="https://en.wikipedia.org/wiki/Viewing_frustum">frustum</a>, c’est-à-dire l’espace
dans lequel un objet sera visible de l’observateur.</p>
<img alt="../_images/frustum.png" src="../_images/frustum.png" />
<p>Pour créer un objet de type <a class="reference external" href="https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera">PerspectiveCamera</a>, il faut indiquer 4 paramètres :</p>
<dl class="simple">
<dt>fov (field of view)</dt><dd><p>Le champ de vision correspondant à l’ange (en degré) vertical d’ouverture du <em>frustum</em>.</p>
</dd>
<dt>aspect</dt><dd><p>Le ratio entre la largeur et la hauteur. Pour éviter d’avoir une image déformée,
ce ratio doit correspondre à celui du rapport largeur sur hauteur du <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code></p>
</dd>
<dt>near</dt><dd><p>La distance du <strong>near plane</strong> dans l’unité de la scène.</p>
</dd>
<dt>far</dt><dd><p>La distance du <strong>far plane</strong> dans l’unité de la scène.</p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</pre></div>
</div>
<p>Un objet <a class="reference external" href="https://threejs.org/docs/index.html#api/en/cameras/Camera">Camera</a> maintient en interne une matrice mathématiques dite <strong>matrice
de projection</strong> qui permet de réaliser les calculs lors de la création d’une image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Une autre caméra très utile est la <a class="reference external" href="https://threejs.org/docs/index.html#api/en/cameras/OrthographicCamera">OrthographicCamera</a>. Cette caméra
crée une projection orthographique qui ne prend pas en compte les points de fuite :
les longueurs sont conservées quelle que soit la distance à la caméra.
Ce type de caméra est utile pour des représentations de type CAD ou pour des rendus
2D.</p>
</div>
</div>
<div class="section" id="creation-d-une-scene">
<h2>Création d’une scène<a class="headerlink" href="#creation-d-une-scene" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une scène est une représentation arborescente des objets que l’on souhaite afficher.
Une scène est constituée d’un nœud racine contenant des éléments géométriques
(ou autres) et qui sont à leur tour des nœuds d’un arbre qui peuvent avoir comme fils d’autres
éléments. Nous verrons plus tard, que cette représentation est très pratique,
notamment pour créer des animations et pour créer des interactions entre les éléments
d’une scène.</p>
<p>Pour créer une scène, il suffit d’en créer une instance :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il est possible de changer la couleur de fond de la scène en modifiant sa propriété
<a class="reference external" href="https://threejs.org/docs/index.html#api/en/scenes/Scene.background">background</a> :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// couleur de fond rouge</span>
<span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rendu-d-une-scene">
<h2>Rendu d’une scène<a class="headerlink" href="#rendu-d-une-scene" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le rendu d’une scène est effectué par la méthode <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer.render">render</a> du <a class="reference external" href="https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer">WebGLRenderer</a> à
laquelle on passe la caméra et la scène à rendre :</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
</pre></div>
</div>
<p>Ce qui nous donne le code complet suivant :</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>three.js app<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://threejs.org/build/three.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// création du renderer</span>
      <span class="kd">var</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">();</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>

      <span class="c1">// création de la caméra</span>
      <span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// création de la scène</span>
      <span class="kd">var</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>

      <span class="c1">// couleur de fond rouge</span>
      <span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

      <span class="c1">// rendu</span>
      <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Vous pouvez <a class="reference download internal" download="" href="../_downloads/f508693ff3a83049a4a714fc23d8e889/scene001.html"><code class="xref download docutils literal notranslate"><span class="pre">télécharger</span> <span class="pre">ce</span> <span class="pre">fichier</span> <span class="pre">directement</span></code></a>.</p>
<p>Cette scène n’a cependant pas un grand intérêt car elle est vide et se contente
d’afficher un fond rouge. Nous verrons au chapitre suivant comment ajouter
des éléments dans la scène.</p>
</div>
<div class="section" id="redimensionnement-du-canevas">
<h2>Redimensionnement du canevas<a class="headerlink" href="#redimensionnement-du-canevas" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://threejs.org/">three.js</a> ne prend pas en compte automatiquement le redimensionnement de la fenêtre.
Si vous voulez faire un rendu sur la totalité de la fenêtre et que vous voulez prendre
en compte le redimensionnement de la fenêtre, alors il vous faut ajouter un <em>listener</em> DOM
sur l’événement <code class="docutils literal notranslate"><span class="pre">resize</span></code> de la fenêtre.</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">updateViewportSize</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">camera</span><span class="p">.</span><span class="nx">aspect</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">/</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">;</span>
  <span class="nx">camera</span><span class="p">.</span><span class="nx">updateProjectionMatrix</span><span class="p">()</span>
  <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span> <span class="nx">updateViewportSize</span><span class="p">);</span>
<span class="nx">updateViewportSize</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<p>Il n’est plus nécessaire de fournir un ratio largeur sur hauteur correct au
moment de la création de la caméra. Il suffit d’appeler une première fois la méthode
<code class="docutils literal notranslate"><span class="pre">updateViewportSize</span></code>. La ligne 5 est très importante. Elle signale à la caméra
qu’elle doit recalculer sa matrice de projection. Lorsqu’on modifie les
caractéristiques internes de la caméra (<em>FOV</em>, aspect…), il faut toujours
appeler cette méthode pour finir.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="objets_et_scene.html" class="btn btn-neutral float-right" title="Objets et scène" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Sommaire" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright David Gayerie - david.gayerie@reseau-cd.net - CC-BY-SA

    </p>
  </div>
    <div>Téléchargez ce support au format <a class="reference download" href="https://github.com/spoonless/epsi-i2-3d/archive/gh-pages.zip">HTML</a>
    </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>